(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{146:function(t,n,e){"use strict";n.a={methods:{footer:function(){$("#mailContent").height()<$(window).height()?this.$store.commit("changeFooterFixed",!0):this.$store.commit("changeFooterFixed",!1)}}}},148:function(t,n,e){"use strict";var o=e(11),c=e(150),r=e.n(c);r.a.interceptors.response.use(function(t){return t.data?t.data:{}},function(t){return Promise.reject(t)});var l=r.a;e.d(n,"f",function(){return f}),e.d(n,"h",function(){return v}),e.d(n,"g",function(){return m}),e.d(n,"d",function(){return _}),e.d(n,"n",function(){return h}),e.d(n,"i",function(){return C}),e.d(n,"a",function(){return w}),e.d(n,"e",function(){return k}),e.d(n,"c",function(){return x}),e.d(n,"m",function(){return y}),e.d(n,"j",function(){return T}),e.d(n,"b",function(){return j}),e.d(n,"l",function(){return D}),e.d(n,"k",function(){return $});var d="production api",f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.get("".concat(d,"article/get"),{params:t})},v=function(t){return l.get("".concat(d,"article/get/").concat(t))},m=function(){return l.get("".concat(d,"article/getAll"))},_=function(t){return l.post("".concat(d,"article/like/").concat(t))},h=function(){return l.get("".concat(d,"tag/get"))},C=function(t){return l.get("".concat(d,"comment/get"),{params:t})},w=function(t){return l.put("".concat(d,"comment/add"),Object(o.a)({},t))},k=function(t){return l.post("".concat(d,"comment/like/").concat(t))},x=function(t){return l.put("".concat(d,"reply/add"),Object(o.a)({},t))},y=function(t){return l.get("".concat(d,"reply/get/").concat(t))},T=function(t){return l.get("".concat(d,"hero/get"),{params:t})},j=function(t){return l.put("".concat(d,"hero/add"),Object(o.a)({},t))},D=function(t){return l.get("".concat(d,"project/get"),{params:t})},$=function(t){return l.get("".concat(d,"music/get"),{params:t})}},152:function(t,n,e){"use strict";n.a={methods:{toZero:function(t){return t>9?t:"0".concat(t)},toTime:function(t,n){var e=new Date(t);return"".concat(e.getFullYear()).concat(n).concat(this.toZero(e.getMonth()+1)).concat(n).concat(this.toZero(e.getDate()))}}}},157:function(t,n,e){},158:function(t,n,e){},199:function(t,n,e){"use strict";var o=e(157);e.n(o).a},200:function(t,n,e){"use strict";var o=e(158);e.n(o).a},214:function(t,n,e){"use strict";e.r(n);var o=e(11),c=(e(44),e(5)),r=e(148),l={data:function(){return{scrollDom:null,scrollNum:0}},computed:{scrollTop:function(){return this.$store.state.scrollTop}},methods:{scroll:function(t){1===t?this.scrollNum+=400:this.scrollNum=0,$("html,body").animate({scrollTop:"".concat(this.scrollNum,"px")},300)},mail:function(){window.open("http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=CTo_OTs4PDs6OUl4eCdqZmQ","_blank")}},watch:{scrollTop:function(t){this.scrollNum=t}}},d=(e(199),e(8)),f=Object(d.a)(l,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"sideIcon"},[e("i",{staticClass:"iconfont",on:{click:t.mail}},[t._v("")]),t._v(" "),e("i",{staticClass:"iconfont",on:{click:function(n){return t.scroll(1)}}},[t._v("")]),t._v(" "),e("i",{staticClass:"iconfont",on:{click:function(n){return t.scroll(0)}}},[t._v("")])])},[],!1,null,"56bc0acf",null).exports,v=e(146),m=e(152),_=Object(r.n)(),h=Object(r.f)({hot:!0}),C=Object(r.f)({current_page:1}),w={head:function(){return{title:"naice | 文章"}},layout:"layout",mixins:[v.a,m.a],components:{ToTop:f},asyncData:function(){var t=Object(c.a)(regeneratorRuntime.mark(function t(n){var e,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.params,t.next=3,_;case 3:return e=t.sent,t.next=6,C;case 6:return o=t.sent,t.next=9,h;case 9:return c=t.sent,t.abrupt("return",{tags:e,article:o.result.list,hotArticle:c.result.list});case 11:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}(),data:function(){return{showFixedTag:!1,sideHot:null,isLoadingData:!1,hasMore:!0,page:1}},computed:{scrollTop:function(){return this.$store.state.scrollTop}},methods:{loadMore:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isLoadingData=!0,this.page+=1;var e=Object(o.a)({current_page:this.page},n);Object(r.f)(e).then(function(e){t.isLoadingData=!1;var o=e.result;t.page>=o.pagination.total_page&&(t.hasMore=!1);var c=[];c=n.tag||n.keyword||n.isNew?o.list:t.article.concat(o.list),t.article=c,t.$nextTick(function(){t.footer()})}).catch(function(n){t.isLoadingData=!1})},goDetail:function(t,data){var n=data.filter(function(n){return n._id==t});this.$store.commit("selectArticle",n[0]),this.$router.push("/article/"+t)}},mounted:function(){var t=this;this.$nextTick(function(){t.sideHot=document.querySelector("#sideHot"),t.mailContentDom=document.querySelector("#mailContent"),t.windowHeight=document.documentElement.clientHeight,t.footer(),window.addEventListener("scroll",function(n){var e=$(document).scrollTop(),o=t.mailContentDom.offsetHeight;t.showFixedTag=e>=t.sideHot.offsetHeight+80,t.windowHeight+e>o-50&&!t.isLoadingData&&t.hasMore&&t.loadMore()})})},beforeRouteEnter:function(t,n,e){e(function(n){(t.query.tag||t.query.keyword)&&n.loadMore(t.query)})},beforeRouteUpdate:function(t,n,e){this.page=0,this.hasMore=!0,t.query.tag||t.query.keyword?this.loadMore(t.query):this.loadMore({isNew:!0}),e()}},k=(e(200),Object(d.a)(w,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"articleBox"},[e("main",{staticClass:"box main"},[e("section",{staticClass:"article"},[t._l(t.article,function(n,o){return e("div",{key:o,staticClass:"item"},[e("a",{staticClass:"article-title",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.goDetail(n._id,t.article)}}},[e("h2",[t._v(t._s(n.title))])]),t._v(" "),e("p",{staticClass:"article-desc"},[t._v(t._s(n.descript))]),t._v(" "),e("div",{staticClass:"article-info"},[e("span",{staticClass:"time"},[t._v(t._s(t.toTime(n.update_at,".")))]),t._v(" "),e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",{staticClass:"time"},[n.meta?e("strong",[t._v(t._s(n.meta.views))]):t._e(),t._v("次阅读\n          ")]),t._v(" "),e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",{staticClass:"time"},[n.meta?e("strong",[t._v(t._s(n.meta.comments))]):t._e(),t._v("条评论\n          ")]),t._v(" "),e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",{staticClass:"time"},[n.meta?e("strong",[t._v(t._s(n.meta.likes))]):t._e(),t._v("人喜欢\n          ")])])])}),t._v(" "),t.hasMore?e("div",{staticClass:"loadmore"},[t.isLoadingData?e("span",[t._v("数据加载中...")]):t._e()]):e("div",{staticClass:"loadmore"},[t._v("没有更多数据了")])],2),t._v(" "),e("section",{staticClass:"side"},[e("div",{staticClass:"hot",attrs:{id:"sideHot"}},[e("div",{staticClass:"hot-title"},[t._v("热门文章")]),t._v(" "),e("div",{staticClass:"hot-article"},t._l(t.hotArticle,function(n,o){return e("h3",{key:o,on:{click:function(e){return t.goDetail(n._id,t.hotArticle)}}},[e("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(n.title))])])}),0)]),t._v(" "),e("div",{class:t.showFixedTag?"fixedTag":""},[e("div",{staticClass:"tags",attrs:{id:"tags"}},[e("div",{staticClass:"hot-title"},[t._v("标签")]),t._v(" "),e("div",{staticClass:"tag-list"},t._l(t.tags.result.list,function(n,o){return e("nuxt-link",{key:o,attrs:{to:"/article?tag="+n._id}},[t._v("\n              "+t._s(n.name)+"\n              "),e("span",[t._v("("+t._s(n.count)+")")])])}),1)]),t._v(" "),e("div",{staticClass:"smallNav"},[e("div",{staticClass:"flag"}),t._v(" "),e("div",[e("nuxt-link",{attrs:{to:"/about"}},[t._v("我")]),t._v(" "),e("i",[t._v("•")]),t._v(" "),e("nuxt-link",{attrs:{to:"/hero"}},[t._v("留言墙")]),t._v(" "),e("i",[t._v("•")]),t._v(" "),e("nuxt-link",{attrs:{to:"/allarticle"}},[t._v("归档")])],1)])])])]),t._v(" "),e("to-top")],1)},[],!1,null,"769b4dff",null));n.default=k.exports}}]);